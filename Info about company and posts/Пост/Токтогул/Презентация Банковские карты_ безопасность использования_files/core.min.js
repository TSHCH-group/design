!function(){function Core(){var e=Array.prototype.slice.call(arguments,1),o=arguments[0];o in Core?Core[o].apply(Core,e):console.log('No such method "'+o+'" for Core')}function setButtonLoading(e){if(null!==e){if(jQuery(e.target).attr("disabled"))return!1;jQuery(e.target).attr("disabled",!0).addClass("a-load-button")}return!0}function validateFormData(e){return"string"==typeof e||"object"==typeof e?"string"==typeof e&&"#"==e.charAt(0)?(jQuery(e+" .errorSummary").slideUp(300),{objData:jQuery(e).serialize(),isForm:!0}):{objData:e}:{objData:null}}function Popup(e){Popup.msg=e,Popup.b_stay=void 0!==arguments[1]&&arguments[1],Popup.b_error=!1,Popup._show.apply(Popup)}function Dlg(){var e=null,o="",t={};void 0!==arguments[0]&&(e=arguments[0]),void 0!==arguments[1]&&(o="/"+arguments[1]),void 0!==arguments[2]&&(t.a=arguments[2]),void 0!==arguments[3]&&(t.b=arguments[3]),Core.ajax(e,"/dlg"+o,t)}function setupDlgListeners(){var e=jQuery("#aa-modal-dlg"),o=jQuery("#aa-modal-bg");e.length&&o.length&&(e[0].addEventListener("mousedown",function(e){Dlg.clickInside=!0},!0),o[0].addEventListener("mousedown",function(e){Dlg.clickInside=!1},!0))}function Tooltip(e,o,t){if(e){var a=e.target,i=jQuery("<span>").addClass("a-tooltip").css({display:"none",top:e.pageY-10+"px",left:e.pageX+20+"px"}).html(o).appendTo("body").fadeIn("slow");if(t){var n=a.getBoundingClientRect(),r=document.body.getBoundingClientRect();if("top"===t.position)var d=n.top-r.top-i.outerHeight()-20;else"bottom"===t.position&&(d=n.top+n.height-r.top+20);var s=n.left+n.width/2-r.left-i.outerWidth()/2;i.css({top:d,left:s})}}}function Socket(){Socket.ids_rooms=[],Socket.view_room=0}function init(){window.iu=Core}Core.user_id=0,Core.user_type=0,Core.url_socket="",Core.is_tested=!1,Core.set=function(){if(1==arguments.length&&"object"==typeof arguments[0])for(var e in arguments[0])e in Core?Core[e]=arguments[0][e]:console.log('No such method "'+e+'" for Core');else 2==arguments.length?arguments[0]in Core?Core[arguments[0]]=arguments[1]:console.log('No such method "'+arguments[0]+'" for Core'):console.log("Argument Error")},Core.ajax=function(e,url,form,callback,options,target){if(setButtonLoading(e)){var validate=validateFormData(form),objData=validate.objData,isForm=validate.isForm;return url+=(url.split("?")[1]?"&":"?")+"isAjax=1",jQuery.ajax({url:url,timeout:6e4,tryCount:0,retryLimit:2,xhrFields:{withCredentials:!0},type:"POST",data:objData,dataType:"json",error:function(o,t){if("timeout"===t)return iu.popup.error("Превышено время ожидания"),this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0;if(300<=o.status)try{var a=JSON.parse(o.responseText);void 0!==a.message?Popup.error(a.message):Popup.error(o.status+" "+o.statusText+"<hr />"+o.responseText)}catch(e){Popup.error(o.status+" "+o.statusText+"<hr />"+o.responseText)}null!==e&&setTimeout(function(){jQuery(e.target).removeAttr("disabled").removeClass("a-load-button")},2e3),options&&options.noErrorLog||iu.to_log("js:error_log",{url:o.url,location:window.location.href,status:o.status,response:o.responseText})},success:function(data){if("function"==typeof callback&&callback(data),void 0!==data.error)switch(data.error.type){case"popup":Popup.error(data.error.msg);break;case"form":isForm&&(jQuery(form+" .errorSummary").remove(),jQuery(data.error.msg).hide().prependTo(form),jQuery(form+" .errorSummary").slideDown(300))}else void 0!==data.popup?Popup(data.popup):void 0!==data.popupStay&&Popup(data.popupStay,!0);if(void 0!==data.modal){var width="644px",marginTop="30px";void 0!==data.modal.width&&(width=data.modal.width),void 0!==data.modal.marginTop&&(marginTop=data.modal.marginTop),void 0!==data.modal.html&&Dlg.show(data.modal.html,width,marginTop),void 0!==data.modal.onHide&&(Dlg.on_hide=data.modal.onHide),void 0!==data.modal.hide_on_bg_click&&(Dlg.hide_on_bg_click=data.modal.hide_on_bg_click)}if(void 0!==data.update&&jQuery(data.update.obj).html(data.update.val),void 0!==data.replace&&jQuery(data.replace.obj).replaceWith(data.replace.val),void 0!==data.append&&jQuery(data.append.obj).append(data.append.val),void 0!==data.hideModal&&data.hideModal&&Dlg.hide(),void 0!==data.reload&&data.reload&&location.reload(),void 0!==data.url)if("_blank"!==target||isSafari)location.href=data.url;else{var isSafari=!1,ua=navigator.userAgent.toLowerCase();-1!==ua.indexOf("safari")&&(isSafari=-1===ua.indexOf("chrome")),isSafari?location.href=data.url:window.open(data.url,"_blank")}void 0!==data.js&&eval(data.js),void 0!==data.pay&&(jQuery("body").append(data.pay),jQuery("#aa-payment-form").submit()),null!==e&&setTimeout(function(){jQuery(e.target).removeAttr("disabled").removeClass("a-load-button")},3e3)}}),!1}},Core.download=function(i,e,o){if(setButtonLoading(i)){var t=validateFormData(o).objData,n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status){var e=n.response,o=this.getResponseHeader("Content-Disposition");if(o){var t=o.match(/filename=('|")(.+?)('|")/)[2],a=document.createElement("a");a.href=window.URL.createObjectURL(e),a.download=decodeURI(t),a.click(),Dlg.hide()}else Popup.error("Обновите страницу и попробуйте позже.")}else""!==n.responseText&&Popup.error(n.responseText);i&&jQuery(i.target).removeAttr("disabled").removeClass("a-load-button")}else 2===n.readyState&&(200===n.status?n.responseType="blob":n.responseType="text")},n.send(t)}},Core.is_scroll=function(){return-[1]?document.body.offsetHeight>window.innerHeight:(document.body.offsetHeight,document.documentElement.clientHeight,!0)},Core.global_error_handler=function(e,o,t){return column="notset",obj="notset",void 0!==arguments[3]&&(column=arguments[3]),void 0!==arguments[4]&&(obj=arguments[4]),Core.ajax(null,"/ajax/jsErrorLog",{msg:e,url:o,line:t,column:column,obj:obj}),!0},Core.to_log=function(e,o){3937!==iu.user_id&&1!==Math.floor(1e3*Math.random())||Core.ajax(null,"/site/toLog",{message:o,category:e},null,{noErrorLog:!0})},Popup.msg="",Popup.interval=null,Popup.b_stay=!1,Popup.b_error=!1,Popup.default_errors_stay=!1,Popup.error=function(e,o){Popup.msg=e,Popup.b_stay=void 0===o?Popup.default_errors_stay:o,Popup.b_error=!0,Popup._show.apply(Popup)},Popup.start=function(){Popup.b_stay||(Popup.interval=setTimeout(function(){Popup.hide(1500)},3e3))},Popup.stop=function(){clearInterval(Popup.interval),Popup.interval=null},Popup.hide=function(){Popup.stop(),jQuery("#aa-popup").fadeOut(void 0!==arguments[0]?arguments[0]:300)},Popup._show=function(){Popup.stop(),jQuery("#aa-popup-msg").html(Popup.msg),jQuery("#aa-popup").attr("class",Popup.b_error?"a-di-non-upss-r":"a-di-non-upss"),jQuery("#aa-popup").stop(!0,!0).fadeIn(600),Popup.start()},Core.popup=Popup,Dlg.scroll_width=0,Dlg.callback_close=null,Dlg.on_hide=null,Dlg.on_hide=null,Dlg.confirm_close=null,Dlg.confirm_msg=null,Dlg.confirm_callback=null,Dlg.hide_on_bg_click=!0,Dlg.show=function(e){Popup.hide();var o="644px",t="64px";void 0!==arguments[1]&&(o=arguments[1]),void 0!==arguments[2]&&(t=arguments[2]),jQuery("body").css("overflow","hidden"),Core.is_scroll()&&jQuery("body").add(".i-menu").css("padding-right",Dlg.scroll_width+"px"),jQuery("#aa-modal-bg").css("overflow-y","auto").show(),jQuery("#aa-modal-dlg").stop(!0,!0),jQuery("#aa-modal-dlg>*").remove(),jQuery("#aa-modal-dlg").html(e).css("width",o).css("margin-top",t).fadeIn(300)},Dlg.hide=function(){void 0!==arguments[0]&&(Dlg.confirm_close=arguments[0]),Dlg.confirm_close?Popup(Dlg.confirm_close,!0):("function"==typeof Dlg.callback_close&&(Dlg.callback_close(),Dlg.callback_close=null),Dlg.on_hide&&(eval(Dlg.on_hide),Dlg.on_hide=null),jQuery("[id|=aa-modal]").fadeOut(300,function(){jQuery("body").css("overflow","auto").add(".v-menu-bg").css("padding-right","inherit"),jQuery("#aa-header").addClass("a-fixd"),jQuery("#aa-modal-dlg").html("")}))},Dlg.confirm=function(e,o,t,a){Dlg.confirm_callback=a;var i=Dlg.confirm_msg;i=(i=i.replace(/\{title\}/gi,o)).replace(/\{msg\}/gi,t),Dlg.show(i)},Dlg.confirm_yes=function(){Dlg.hide(),"function"==typeof Dlg.confirm_callback&&Dlg.confirm_callback()},Dlg.youtube=function(e,o){Dlg.show('<div class="dg-popup"><a class="dg-popup__close" href="javascript:;" onclick="iu.dlg.hide();"><i class="icon icon-close"></i></a><div class="dg-popup__title">'+o+'</div><div style=\'position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\'><iframe style=\'position: absolute;top:0;left:0;width:100%;height: 100%;border-width: 0;outline-width: 0;\' width="560" height="315" class="dg-course-execute__iframe" src="//www.youtube.com/embed/'+e+'?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe></div></div>')},Dlg.bg_click=function(){Dlg.clickInside||iu.dlg.hide_on_bg_click&&iu.dlg.hide()},$(setupDlgListeners),Core.dlg=Dlg,Tooltip.hide=function(e){jQuery(".a-tooltip").remove()},Core.tooltip=Tooltip,Core.scrollIntoView=function(e){var o=$(e);if(o.length){var t=o.offset().top-50;$("body,html").stop(!0).animate({scrollTop:t})}},Socket.conn_url="http://127.0.0.1:3000",Socket.connect=null,Socket.isIO=!1,Socket.msgChatTpl="",Socket.msgChatItemTpl="",Socket.msgDialogTpl="",Socket.msgCommentTpl="",Socket.msgPopupTpl="",Socket.id_room=0,Socket.ids_rooms=[],Socket.users={},Socket.msg_url=null,Socket.init=function(){(Core.user_id||Core.is_tested)&&(Socket.conn_url=Core.url_socket,"undefined"!=typeof io?(Socket.isIO=!0,Socket.connect=io.connect(Socket.conn_url,{path:"/socket.io",transports:["websocket"],secure:!0}),Socket.connect.on("connect",function(e){Socket.join()}),Socket.connect.on("connecting",function(e){console.log(e),Socket.online()}),Socket.connect.on("errors",function(e){console.log(e)}),Socket.connect.on("error",function(e){Core.to_log("SOCKET",e)}),Socket.connect.on("mess",function(e){Socket.setMessage(e)}),Socket.connect.on("msg-lesson-started",function(e){if("function"==typeof handleLessonStarted)handleLessonStarted(e);else{var o=returnLessonStartedTemplate(e.id,e.title,e.teacherFullName,!0),t=document.getElementById("d-ask-msg-popup");t&&(t.innerHTML=o)}}),Socket.connect.on("msg-lesson-ended",function(e){"function"!=typeof handleLessonStarted&&closeLessonStartedPopup(e.id)}),Socket.connect.on("connect-olympic",function(e){}),Socket.connect.on("get-connect-olympic",function(e){}),Socket.connect.on("start-olympic",function(e){}),Socket.connect.on("olympic-update-progress",function(e){}),Socket.connect.on("room",function(e){Socket.setRoom(e)}),Socket.connect.on("disconnect",function(e){console.log(e),Socket.offline()})):Socket.isIO=!1)},Socket.join=function(){Socket.isIO&&Socket.connect.emit("join",{id_user:Core.user_id})},Socket.online=function(){var e=jQuery("#d-server-status");e.hasClass("kr-offline")&&(e.removeClass("kr-offline"),e.addClass("kr-online"))},Socket.offline=function(){var e=jQuery("#d-server-status");e.hasClass("kr-online")&&(e.removeClass("kr-online"),e.addClass("kr-offline"))},Socket.setRoom=function(e){Socket.id_room===e.dataRoom.id&&($.extend(Socket.users,e.users),1===e.dataRoom.type_room?Socket.updateAppMessages(e):2===e.dataRoom.type_room?Socket.msgComment(e):"msg-add"==e.action&&Socket.msgChat(e))},Socket.setMessage=function(e){$.extend(Socket.users,e.users),parseInt(e.dataMsg.id_user)!==Core.user_id&&Socket.id_room!==e.dataRoom.id&&(Socket.msgPopup(e),iu.AppMsg.getNewMsg())},Socket.updateRoom=function(e){parseInt(e.msg_user)==Core.user_id&&iu.ajax(null,"/ask/updateRoom",{id:e.id,msg_cnt:e.msg_cnt}),$('[data-room="'+e.id+'"]').find("span.d-room-msg-cnt").html(e.msg_cnt)},Socket.msgChat=function(e){var o=jQuery(".kr-dialog-block .kr-dialog"),t=new Date(1e3*e.dataMsg.created_at),a=(t.getDate()<10?"0":"")+t.getDate()+"."+((t.getMonth()<9?"0":"")+(t.getMonth()+1))+"."+t.getFullYear()+" "+((t.getHours()<10?"0":"")+t.getHours())+":"+((t.getMinutes()<10?"0":"")+t.getMinutes())+":"+((t.getSeconds()<10?"0":"")+t.getSeconds()),i=e.dataMsg.id_user,n=Socket.users[i],r="",d="0000";null!==e.dataUser&&void 0!==e.dataUser.token&&(d=e.dataUser.token);var s=o.children('div[data-id-token="'+d+'"]');if(s.length)s.attr("data-id",e.dataMsg.id),s.find("span.d-delivered").append('<span><i class="kr-ask-icon kr-ok"></i></span>'),s.find(".d-time").html(a),$("#form-send-message-"+e.dataRoom.id+"-0").find('[name="id_parent"]').val(e.dataMsg.id),$("#form-send-message-"+e.dataRoom.id+"-0").find("button").attr("onClick","sendItem(event,'#form-send-message-"+e.dataRoom.id+"-"+e.dataMsg.id+"');"),$("#form-send-message-"+e.dataRoom.id+"-0").attr("id","form-send-message-"+e.dataRoom.id+"-"+e.dataMsg.id),s.removeAttr("data-id-token");else if(parseInt(e.dataMsg.id_parent)&&parseInt(e.dataMsg.id_user)!=Core.user_id){var l=jQuery('div [data-id="'+parseInt(e.dataMsg.id_parent)+'"]').find(".d-comment-item");r=(r=(r=Socket.msgChatItemTpl).replace(/\{msg\}/gi,e.dataMsg.msg)).replace(/\{avatar\}/gi,n.avatar),l.append(r)}else r=(r=(r=(r=(r=(r=(r=(r=(r=Socket.msgChatTpl).replace(/\{class\}/gi,"")).replace(/\{data-id\}/gi,'data-id="'+e.dataMsg.id+'"')).replace(/\{data-id-token\}/gi,"")).replace(/\{msg\}/gi,e.dataMsg.msg)).replace(/\{name\}/gi,n.full_name)).replace(/\{time\}/gi,a)).replace(/\{delivered\}/gi,"")).replace(/\{avatar\}/gi,n.avatar),o.append(r)},Socket.msgDialog=function(e){var o=$("#ajaxListView").find(".dr-gallery"),t=new Date(1e3*e.dataMsg.created_at),a=(t.getDate()<10?"0":"")+t.getDate()+"."+((t.getMonth()<9?"0":"")+(t.getMonth()+1))+"."+t.getFullYear()+" "+((t.getHours()<10?"0":"")+t.getHours())+":"+((t.getMinutes()<10?"0":"")+t.getMinutes())+":"+((t.getSeconds()<10?"0":"")+t.getSeconds()),i=e.dataMsg.id_user,n=Socket.users[i],r="",d="0000";null!==e.dataUser&&void 0!==e.dataUser.token&&(d=e.dataUser.token);var s=o.find('div[data-id-token="'+d+'"]');s.length?(s.attr("data-id",e.dataMsg.id),s.find("span.d-delivered").append('<span><i class="kr-ask-icon kr-ok"></i></span>'),s.find(".d-time").html(a),s.removeAttr("data-id-token")):(r=(r=(r=(r=(r=(r=(r=(r=Socket.msgDialogTpl).replace(/\{class\}/gi,"")).replace(/\{data-id\}/gi,'data-id="'+e.dataMsg.id+'"')).replace(/\{data-id-token\}/gi,"")).replace(/\{msg\}/gi,e.dataMsg.msg)).replace(/\{name\}/gi,n.full_name)).replace(/\{time\}/gi,a)).replace(/\{avatar\}/gi,n.avatar),o.prepend(r),Socket.id_room==e.dataRoom.id&&iu.AppMsg.lastView(e.dataMsg.id_room,e.dataMsg.id))},Socket.updateAppMessages=function(e){if(window.app){if(app.messages&&parseInt(app.messages.roomId,10)===parseInt(e.dataMsg.id_room,10)){if(e.dataUser){var o=e.dataUser.token;e.dataMsg.token=o;var t=app.messages.findWhere({token:o})}t?t.set(e.dataMsg):app.messages.add(e.dataMsg,{at:0})}if(app.users){var a=e.dataMsg.id_user,i=app.users.get(a),n=e.dataMsg.id_user,r={id:a,full_name:Socket.users[n].full_name,is_online:!0};i?i.set(r):app.users.add(r)}if(app.dialogs){var d=app.dialogs.get(e.dataRoom.id);d&&d.set("room",e.dataRoom),app.dialogs.fetch({remove:!1,pageSize:Math.max(app.dialogs.length,20)})}}},Socket.msgComment=function(e){var o=$("div.aa-comment-list"),t=new Date(1e3*e.dataMsg.created_at),a=(t.getDate()<10?"0":"")+t.getDate()+"."+((t.getMonth()<9?"0":"")+(t.getMonth()+1))+"."+t.getFullYear()+" "+((t.getHours()<10?"0":"")+t.getHours())+":"+((t.getMinutes()<10?"0":"")+t.getMinutes())+":"+((t.getSeconds()<10?"0":"")+t.getSeconds()),i=e.dataMsg.id_user,n=Socket.users[i],r="",d="0000";null!==e.dataUser&&void 0!==e.dataUser.token&&(d=e.dataUser.token);var s=o.children('div[data-id-token="'+d+'"]');s.length?(s.attr("data-id",e.dataMsg.id),s.find("span.d-delivered").append('<span><i class="kr-ask-icon kr-ok"></i></span>'),s.find(".d-time").html(a),s.removeAttr("data-id-token")):(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=Socket.msgCommentTpl).replace(/\{data-id\}/gi,'data-id="'+e.dataMsg.id+'"')).replace(/\{data-id-token\}/gi,"")).replace(/\{msg\}/gi,e.dataMsg.msg)).replace(/\{name\}/gi,n.full_name)).replace(/\{time\}/gi,a)).replace(/\{avatar\}/gi,n.avatar)).replace(/\{date-str\}/gi,"новый")).replace(/\{id\}/gi,e.dataMsg.id)).replace(/\{id-room\}/gi,e.dataMsg.id_room),o.prepend(r))},Socket.msgPopup=function(o){var e=o.dataMsg.id_user,t=Socket.users[e],a=new Date(1e3*o.dataMsg.created_at),i=(a.getDate()<10?"0":"")+a.getDate()+"."+((a.getMonth()<9?"0":"")+(a.getMonth()+1))+"."+a.getFullYear()+" "+((a.getHours()<10?"0":"")+a.getHours())+":"+((a.getMinutes()<10?"0":"")+a.getMinutes())+":"+((a.getSeconds()<10?"0":"")+a.getSeconds()),n="",r="";function d(){["quote-body"].forEach(function(e){var o=new RegExp("\\[сtRi44ZnE2DkP-"+e+"]","g"),t=new RegExp("\\[сtRi44ZnE2DkP-"+e+"-end]","g");n=(n=n.replace(o,"«")).replace(t,"»")}),["quote-author","quote"].forEach(function(e){var o=new RegExp("\\[сtRi44ZnE2DkP-"+e+"]","g"),t=new RegExp("\\[сtRi44ZnE2DkP-"+e+"-end]","g");n=(n=n.replace(o,"")).replace(t,"")}),200<n.length&&(n=n.substring(0,200)+"...");var e=Socket.msgPopupTpl;return e=(e=(e=(e=(e=(e=e.replace(/\{url\}/gi,r)).replace(/\{name\}/gi,t.full_name)).replace(/\{avatar\}/gi,t.avatar)).replace(/\{msg\}/gi,n)).replace(/\{ask\}/gi,o.dataRoom.msg)).replace(/\{time\}/gi,i),$(e)}1==o.dataRoom.type_room?(n="<div class='ta-informer__item--mes'>Сообщение:</div>"+o.dataRoom.msg,r="/backOffice/dialogn/"+o.dataRoom.id):2==o.dataRoom.type_room?(n="<div class='ta-informer__item--mes comment'>Комментарий:</div>"+o.dataMsg.msg,iu.ajax(null,"/ajax/getCommentUrl",{roomModel:{type_room:o.dataRoom.type_room,id:o.dataRoom.id,obj_id:o.dataRoom.obj_id,id_room:o.dataRoom.id,obj_type:o.dataRoom.obj_type},id:o.dataMsg.id},function(e){r=e.data,s&&s.replaceWith(d())})):4==o.dataRoom.type_room?(n="<div class='ta-informer__item--mes comment'>Комментарий:</div>"+o.dataRoom.msg,r="/ask/view/"+o.dataRoom.id):5==o.dataRoom.type_room&&(n="<div class='ta-informer__item--mes comment'>Комментарий:</div>"+o.dataMsg.msg,r="/lp/bestTeacherDiscussion#"+o.dataMsg.id);var s=d();$("#d-ask-msg-popup").append(s),$("#d-ask-msg-popup").children().slice(0,-4).hide()},Socket.clearView=function(){var t=0;void 0!==arguments[0]&&(t=arguments[0]),$.each(Socket.ids_rooms,function(e,o){t&&t==o?$('[data-room="'+t+'"]').find(".d-isView").html("<span>0 просматривают</span>"):$('[data-room="'+o+'"]').find(".d-isView").html("<span>0 просматривают</span>")})},Socket.activeRooms=function(e){Socket.ids_rooms=e,Socket.isIO&&Socket.connect.emit("room",{id_user:Core.user_id,ids_room:Socket.ids_rooms,view_room:Socket.id_room})},Socket.createOlympic=function(){Socket.isIO&&Socket.connect.emit("olympic-create",{id_user:Core.user_id,id_room:Socket.id_room})},Socket.connectOlympic=function(e){Socket.isIO&&Socket.connect.emit("olympic-connect",{access:e,id_room:Socket.id_room})},Socket.getConnectOlympic=function(){Socket.isIO&&Socket.connect.emit("olympic-get-connect",{id_room:Socket.id_room})},Socket.olympicStart=function(){Socket.isIO&&Socket.connect.emit("olympic-start",{id_room:Socket.id_room})},Socket.olympicFinish=function(e){return-1!==$.inArray(Socket.id_room.toString(),e.ids_rooms)&&(-1!==$.inArray(Core.user_id.toString(),e.ids_users)&&void 0)},Socket.olympicEnd=function(e){return-1!==$.inArray(Socket.id_room.toString(),e.ids_rooms)&&(-1===$.inArray(Core.user_id.toString(),e.ids_users)&&void 0)},Core.sct=Socket,init()}(),jQuery(function(){var e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",e.style.visibility="hidden",document.body.appendChild(e),iu.dlg.scroll_width=e.offsetWidth-e.clientWidth,document.body.removeChild(e),jQuery("#aa-modal-dlg").click(function(e){e.stopPropagation()}),$(window).scroll(function(){0!=$(this).scrollTop()?$("#toTop").fadeIn():$("#toTop").fadeOut()}),$("#toTop").click(function(){$("body,html").animate({scrollTop:0},800)}),$(window).on("load resize",function(){$(window).width()<991&&$(window).scroll(function(){var e=$(this).scrollTop(),o=$(this).height();$(document).height()<=e+o+57?$(".bottom-sticky-info").fadeOut():$(".bottom-sticky-info").fadeIn()})});var o=$("#touch-menu"),t=$(".kr-navbar");$(o).on("click",function(e){e.preventDefault(),t.slideToggle(300)}),$(window).resize(function(){767<$(window).width()&&t.is(":hidden")&&t.removeAttr("style")}),$(".js-scroll-link").on("click",function(e){e.preventDefault();var o=$(this).attr("href"),t=$(o).offset();if(t){var a=t.top;a-=41,$("body,html").stop(!0).animate({scrollTop:a})}})});